# 基础变换：初识向量/矩阵（P90）

- 什么是向量
- 什么是矩阵
- 如果使用矩阵和向量来移动几何图形
- OpenGL 对于模型视图和投影矩阵的约定
- 什么是照相机，以及如何应用它的转换
- 如何将一个点光源位置转换到视点坐标系



## 向量（P91）

向量：总是用来表示带方向的量。有两个重要的值：方向 和 数量。

单位向量：长度为 1 的向量。

标准化：把一个向量缩放到 1。

math3d 库中，M3DVector3f 表示一个三维向量 （X, Y, Z），M3DVector4f 表示一个四维向量（X, Y, Z, W）。典型情况下 W 坐标设为 1.0。X，Y 和 Z 值通过除以 W 来进行缩放。

定义成数组：

```c++
tyedef float M3DVector3f[3]
tyedef float M4DVector4f[4]
```

声明 三分量向量 和 四分量向量：

```c++
M3DVector3f vVector;
M3DVector4f vVectex = { 0.0f, 0.0f, 1.0f, 1.0f }；
```

声明 三分量顶点数组，例如生成一个三角形：

```c++
M3DVector3f vVerts[] = {
	-0.5f, 0.0f, 0.0f,
   0.5f, 0.0f, 0.0f,
   0.0f, 0.5f, 0.0f
};
```



#### 点乘（P93）

两个（三分量）单位向量之间的点乘运算将得到一个标量（只有一个值），它表示两个向量之间的夹角。要进行这种运算，这两个向量必须为单位长度，而返回的结果将在-1.0到+1.0范围之内。这个数字实际上就是这两个向量之间夹角的余弦值。在漫射光计算中，表面法向量和指向光源的向量之间大量进行着这种运算。

在 math3d 库中可以使用 m3dDotProduct3 函数来实现两个向量的点乘。

```objc
float m3dDotProduct3(const M3DVector3f u, const M3DVector3f v);
```

实际点乘结果是一个在 -1 和 +1 之间的值，它代表这两个单位向量之间夹角的余弦值。m3dGetAngleBetweenVectors3 是一个更高级一点的函数，实际上返回这个角的弧度值。

```objc
float m3dGetAngleBetweenVectors3(const M3DVector3f u, const M3DVector3f v);
```



#### 叉乘（P93）

另一种在两个向量之间进行的有用的数学操作是叉乘（cross product）。两个向量之间叉乘所得的结果是另外一个向量，这个新向量与原来两个向量定义的平面垂直。要进行叉乘，这两个向量都不必为单位向量。

在 math3d 库中可以使用 m3dCrossProduct3 函数对两个向量进行差乘并返回运算得到的结果向量。

```objc
void m3dCrossProduct3(M3DVector3f result, const M3DVector3f u, const M3DVector3f v);
```

和点乘不同，在进行叉乘时向量的顺序是非常重要的。V3是V2和V1进行叉乘得到的结果。如果调换V1和V2的顺序，那么结果得到的V3将会指向与原来相反的方向。从寻找三角形表面法线到构造变换矩阵，关于叉乘的应用数不胜数。



#### 矩阵（P94）

矩阵（matrix）不仅是好莱坞电影三部曲的名字，它还是一种功能非常强大的数学工具，它大大简化了求解变量之间有复杂关系的方程或方程组的过程。其中一个具有普遍性的例子和图形程序设计人员密切相关，就是坐标变换。例如，如果在空间中有一个点，由x，y和z坐标定义，将它围绕任意点沿任意方向旋转一定角度后，我们需要知道这个点现在的位置，就要用到矩阵。这是为什么呢？因为新的x坐标不仅与原来的x坐标和其他旋转参数有关，还与y和z坐标值有关。这种变量与解之间的相关性就是矩阵最擅长解决的问题对于有数学背景的电影《黑客帝国》的影迷来说，矩阵（matrix）确实是一个合适的标题。
在数学上，矩阵只不过是一组排列在统一的行和列中的数字而已一用程序设计的语言来说就是一个二维数组。一个矩阵不必是正方形的，但是矩阵中每一行（或每一列）的元素数都必须和其他行（或列）的元素数相同。图4.4所示为一些矩阵的示例。它们并没提供什么特别的信息，只是演示一下矩阵结构。请注意，一个矩阵只有一行或者一列也是合法的。只有一行或者一列数字可以更简单地称为向量，就像之前讨论过的一样。实际上，就像马上就要看到的，我们可以将矩阵看作一组列向量。










































