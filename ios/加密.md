## 加密

#### 足够复杂

```objective-c
static NSString *salt = @"%^#%$^&*(&UIYJHJKG^%$%^&*(";
```

```objective-c
- (void)test {
    NSString *pwd = @"123456";

    // MD5加密
    // 不足：不够安全，可以反查询
    // pwd = pwd.md5String;

    // MD5 加盐
    // 弊端：盐是固定的，写死在程序里，可能泄露
    // pwd = [pwd stringByAppendingString:salt].md5String;

    /* HMAC
      使用一个密钥加密，并且做两次散列！
      在实际开发中，密钥（key）来自于服务器（动态的）
      一个账号，对应一个key，而且可以更新
    */
    pwd = [pwd hmacMD5StringWithKey:@"key"];

    // 还有个问题：密码是保护了，但是加密后的密码可以被轻易拿到！！
    // 解决方法：从服务器获取时间戳，精确到分钟，对加密后的密码 先加时间戳 再MD5
  
}
```



####加密流程

	注册：
		对 用户密码pwd 做 hmac加密，注册成功后，服务器保存此 哈希串 
	登录：
		从服务器获取精确到分钟的时间戳，对 哈希串 加盐 加时间戳 再MD5；
		服务器做同样处理，已确认登录，如果登录失败，则用前一分钟的时间戳再次校验，
		通过则成功（因为有可能59秒发起的请求）。


####  hash用途

	用户密码的加密
	搜索引擎
	版权
	数字签名